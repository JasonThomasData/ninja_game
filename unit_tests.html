<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>QUnit - tests</title>
  <link rel="stylesheet" href="vendor/QUnit/qunit-2.0.1.css">
  <script src="vendor/QUnit/qunit-2.0.1.js"></script>
</head>
<body>
  <div id="qunit"></div>
  <div id="qunit-fixture"></div>
  <canvas id="canvas"></canvas>

  <script src="js/settings.js"></script>
  <script src="js/entities.js"></script>

  <script>

    function test_entities_init(){
      /* entities.js */

      QUnit.test( "Test that the player object is initialised", function(assert) {
        game_settings.player.px_per_move_x = 100
        var player_entity = new Player();

        var assertion = player_entity.px_per_move_x;
        var value_test = 100;
        assert.ok(assertion == value_test);
      });

      QUnit.test( "Test that the enemy object is initialised", function(assert) {
        game_settings.enemies.px_per_move_x = 50
        var starting_x_pos = 70
        var enemy_entity = new Enemy(starting_x_pos);

        var assertion = enemy_entity.px_per_move_x;
        var value_test = 50;
        assert.ok(assertion == value_test);
      });

    }
    test_entities_init()

    function test_entities_move(){
      /* entities.js */

      QUnit.test( "Test that the player object does not move on update", function(assert) {
        game_settings.player.starting_x_pos = 0;
        var player_entity = new Player();
        player_entity.direction_facing = 'right'
        player_entity.px_to_move_x = 0
        player_entity.update();

        //Despite the update, because there was no px_to_move, then unit's x_pos is unchanged.
        var assertion = player_entity.x_pos;
        var value_test = 0;
        assert.ok(assertion == value_test);
      });

      QUnit.test( "Test that the player object moves right on update", function(assert) {
        game_settings.player.starting_x_pos = 0;
        var player_entity = new Player();
        player_entity.direction_facing = 'right'
        player_entity.px_to_move_x = 1
        player_entity.update();

        //Despite the update, because there was no order to move, then unit's x_pos is unchanged.
        var assertion = player_entity.x_pos;
        var value_test = 1;
        assert.ok(assertion == value_test);
      });

      QUnit.test( "Test that the player object moves left on update", function(assert) {
        game_settings.player.starting_x_pos = 0;
        var player_entity = new Player();
        player_entity.direction_facing = 'left'
        player_entity.px_to_move_x = 1
        player_entity.update();

        //Despite the update, because there was no order to move, then unit's x_pos is unchanged.
        var assertion = player_entity.x_pos;
        var value_test = -1;
        assert.ok(assertion == value_test);
      });

      QUnit.test( "Test that the enemy object moves right on update", function(assert) {
        var starting_x_pos = 100
        var enemy_entity = new Enemy(starting_x_pos);
        enemy_entity.direction_facing = 'right'
        enemy_entity.px_to_move_x = 1
        enemy_entity.update();

        //Despite the update, because there was no order to move, then unit's x_pos is unchanged.
        var assertion = enemy_entity.x_pos;
        var value_test = 101;
        assert.ok(assertion == value_test);
      });

      QUnit.test( "Test that the enemy object moves left on update", function(assert) {
        var starting_x_pos = 100
        var enemy_entity = new Enemy(starting_x_pos);
        enemy_entity.direction_facing = 'left'
        enemy_entity.px_to_move_x = 1
        enemy_entity.update();

        //Despite the update, because there was no order to move, then unit's x_pos is unchanged.
        var assertion = enemy_entity.x_pos;
        var value_test = 99;
        assert.ok(assertion == value_test);
      });

    }
    test_entities_move()

    function test_player_order(){
      /* entities.js */

      QUnit.test( "Test that the player's order to move right changes the player object state", function(assert) {
        //So now, the player object has some pixels to move
        game_settings.player.px_per_move_x = 100
        var player_entity = new Player();
        player_entity.move_order('right')

        var assertion = player_entity.px_to_move_x;
        var value_test = 100;
        assert.ok(assertion == value_test);
      });

      QUnit.test( "Test that the player's order to move left changes the player object state", function(assert) {
        //So now, the player object has some pixels to move
        var player_entity = new Player();
        player_entity.direction_facing = 'right';
        player_entity.move_order('left');

        var assertion = player_entity.direction_facing;
        var value_test = 'left';
        assert.ok(assertion == value_test);
      });

    }
    test_player_order()

  </script>
</body>
</html>